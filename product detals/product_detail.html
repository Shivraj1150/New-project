<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">

    <title>Product Details</title>
      <!-- FontAwesome for icons -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
      <!-- Google Fonts -->
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap">

      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
      <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@100..900&display=swap" rel="stylesheet">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
      <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <style>
        * {
          box-sizing: border-box;
          padding: 0;
          margin: 0;
          font-family: 'Open Sans', sans-serif;
        }
  
        body {
          line-height: 1.6;
          background-color: #f9f9f9;
          padding: 0;
          margin: 0;
          color: #333;
        }
  
        .card-wrapper {
          max-width: 1200px;
          margin: 2rem auto;
          padding: 2rem;
          display: flex;
          flex-wrap: wrap;
          gap: 2rem;
        }
  
        .product-imgs, .product-content {
          flex: 1;
          border-radius: 10px;
          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
          background-color: #fff;
          transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
  
        .product-imgs:hover, .product-content:hover {
          transform: scale(1.02);
          box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
        }
  
        .img-display {
          overflow: hidden;
          height: 500px;
          position: relative;
        }
  
        .img-showcase {
          display: flex;
          transition: transform 0.8s ease-in-out;
          touch-action: pan-y;
        }
  
        .img-showcase img {
          width: 100%;
          object-fit: cover;
          border-radius: 10px 10px 0 0;
        }
  
        .img-select {
          display: flex;
          justify-content: center;
          gap: 1rem;
          padding: 1rem;
          cursor: pointer;
        }
  
        .img-item img {
          width: 80px;
          border-radius: 10px;
          transition: transform 0.4s ease, opacity 0.4s;
        }
  
        .img-item img:hover {
          transform: scale(1.2);
          opacity: 0.8;
        }
  
        .product-content {
          padding: 2rem;
          position: relative;
          z-index: 2;
        }
  
        .product-title {
          font-size: 2.5rem;
          color: #ff6600;
          text-transform: uppercase;
          letter-spacing: 2px;
          margin-bottom: 1rem;
          position: relative;
          padding-bottom: 1rem;
          transition: all 0.3s ease;
        }
  
        .product-title:hover {
          color: #e65c00;
        }
  
        .product-title::after {
          content: '';
          position: absolute;
          bottom: 0;
          left: 0;
          width: 80px;
          height: 4px;
          background-color: #ff6600;
          transition: width 0.5s;
        }
  
        .product-title:hover::after {
          width: 150px;
        }
  
        .product-rating {
          color: #ffaf47;
          margin-bottom: 1rem;
        }
  
        .product-price2 {
          font-size: 1.4rem;
          font-weight: bold;
          margin-bottom: 1rem;
        }
  
        .last-price span {
          color: #ff5a5f;
          text-decoration: line-through;
        }
  
        .new-price span {
          color: #ff6600;
        }
  
        .select-wrapper {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
          margin-top: 1rem;
        }
  
        .select-group {
          display: flex;
          gap: 1rem;
        }
  
        .select-group label {
          font-size: 1rem;
          font-weight: 600;
          color: #333;
        }
  
        .select-group select {
          padding: 0.5rem;
          border-radius: 5px;
          border: 1px solid #ddd;
          font-size: 1rem;
          transition: border-color 0.3s ease;
        }
  
        .select-group select:focus {
          border-color: #ff6600;
        }
  
        .purchase-info {
          display: flex;
          gap: 1rem;
          margin-top: 1.5rem;
        }
  
        .purchase-info input {
          padding: 0.5rem;
          width: 60px;
          border-radius: 5px;
          border: 1px solid #ddd;
        }
  
        .btn {
          padding: 0.7rem 1.5rem;
          border: none;
          border-radius: 25px;
          color: white;
          font-size: 1rem;
          cursor: pointer;
          transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
        }
  
        .btn:hover {
          transform: translateY(-5px);
          box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
  
        .btn-primary {
          background-color: #ff6600;
        }
  
        .btn-primary:hover {
          background-color: #e65c00;
        }
  
        .btn-danger {
          background-color: #ff5a5f;
        }
  
        .btn-danger:hover {
          background-color: #e65356;
        }
  
        .social-links {
          margin-top: 2rem;
          display: flex;
          justify-content: flex-start;
        }
  
        .social-links a {
          font-size: 1.2rem;
          margin-right: 1rem;
          color: #555;
          transition: color 0.3s, transform 0.3s;
        }
  
        .social-links a:hover {
          color: #ff6600;
          transform: scale(1.2);
        }
  
        /* Responsive */
        @media (max-width: 768px) {
          .img-display {
            height: 300px;
          }
          
          .product-title {
            font-size: 2rem;
          }
        }
  
        @media (max-width: 480px) {
          .purchase-info {
            flex-direction: column;
            gap: 0.5rem;
          }
          .card-wrapper{
            flex-direction: column;
          }
          
          .btn {
            width: 100%;
            text-align: center;
          }
        }
  
      </style>
</head>
<body>


<div class="card-wrapper">
    <!-- Product Images Section -->
    <div class="product-imgs">
      <div class="img-display">
        <div class="img-showcase">
          <img id="product-image-1" src="" alt="shoe image 1">
          <img id="product-image-2" src="" alt="shoe image 2">
          <img id="product-image-3" src="" alt="shoe image 3">
          <img id="product-image-4" src="" alt="shoe image 4">
          
        </div>
      </div>
      <div class="img-select">
        <div class="img-item">
          <img id="thumbnail-1" src="" alt="thumbnail 1">
        </div>
        <div class="img-item">
          <img id="thumbnail-2" src="" alt="thumbnail 2">
        </div>
        <div class="img-item">
          <img id="thumbnail-3" src="" alt="thumbnail 3">
        </div>
        <div class="img-item">
          <img id="thumbnail-4" src="" alt="thumbnail 4">
        </div>
      </div>
    </div>

    <!-- Product Content Section -->
    <div class="product-content product  ">
      <h2 id="product-name" class="product-title">Nike Shoes</h2>
      <div class="product-rating">
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star-half-alt"></i>
        <span>4.7 (21)</span>
      </div>

      <div class="product-price2">
        <p   id="product-price" class="last-price"></p>

       
      </div>

      <!-- Select Size and Color Options -->
      <div class="select-wrapper">
        <!-- Select Size -->
        <div class="select-group">
          <label for="size">Select Size:</label>
          <select id="size" name="size">
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
          </select>
        </div>

        <!-- Select Color -->
        <div class="select-group">
          <label for="color">Select Color:</label>
          <select id="color" name="color">
            <option value="black">Black</option>
            <option value="white">White</option>
            <option value="red">Red</option>
            <option value="blue">Blue</option>
          </select>
        </div>
      </div>

      <!-- Purchase Info -->
      <div class="purchase-info product fea_pro_add_to_cart">

        <a href="#" class="add-to-cart" data-id="" data-name="" data-price="" data-image="">
          <i class="fa-solid fa-cart-plus" style="color: #000000;">Add to Cart</i>
      </a>
 
       
     
      </div>

      <!-- Social Links -->
      <div class="social-links">
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>

 
      </div>
      <p id="product-description"></p>
    </div>
  </div>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');

        if (productId) {
            fetch(`get_product_details.php?id=${productId}`)
                .then(response => response.json())
                .then(data => {
                  console.log('Price:', data.price);  // Check the price data type

                    document.getElementById('product-name').textContent = data.name;
                    
                    document.getElementById('product-image-1').src = data.image_url_1;
        document.getElementById('product-image-2').src = data.image_url_2;
        document.getElementById('product-image-3').src = data.image_url_3;
        document.getElementById('product-image-4').src = data.image_url_4;

        // Display 4 thumbnails in img-item (small images)
        document.getElementById('thumbnail-1').src = data.image_url_1;
        document.getElementById('thumbnail-2').src = data.image_url_2;
        document.getElementById('thumbnail-3').src = data.image_url_3;
        document.getElementById('thumbnail-4').src = data.image_url_4;
                  
                    // Display product description and price
                    document.getElementById('product-description').textContent = data.description;
                    const price = parseFloat(data.price);
        if (!isNaN(price)) {
            // Format price with ₹ symbol and two decimal places
            document.getElementById('product-price').textContent = `₹${price.toFixed(2)}`;
        } else {
            console.error('Price is not a valid number');
            document.getElementById('product-price').textContent = 'Price not available';
        }

           // Set the product details for add-to-cart button
           const addToCartButton = document.querySelector('.add-to-cart');
                addToCartButton.setAttribute('data-id', data.id);
                addToCartButton.setAttribute('data-name', data.name);
                addToCartButton.setAttribute('data-price', data.price);
                addToCartButton.setAttribute('data-image', data.image_url_1);

                    // Display video if available
                    const videoElement = document.getElementById('product-video');
                    const videoSource = document.getElementById('video-source');
                    if (data.video_url) {
                        videoElement.style.display = 'block';
                        videoSource.src = data.video_url;
                    } else {
                        videoElement.style.display = 'none';
                    }

                    // Load related products
                    loadRelatedProducts(data.related_product_ids);
                });
        }

        function loadRelatedProducts(relatedProductIds) {
            if (relatedProductIds) {
                fetch(`get_related_product_details.php?ids=${relatedProductIds}`)
                    .then(response => response.json())
                    .then(products => {
                        const relatedProductsDiv = document.getElementById('related-products');
                        products.forEach(product => {
                            const productElement = document.createElement('div');
                            productElement.innerHTML = `
                                <a href="product_detail.html?id=${product.id}">
                                    <img src="${product.image_url_1}" alt="${product.name}" style="max-width: 100px;">
                                    <p>${product.name}</p>
                                    <p>$${product.price.toFixed(2)}</p>
                                </a>
                            `;
                            relatedProductsDiv.appendChild(productElement);
                        });
                    });
            }
        }
    });

    const imgItems = document.querySelectorAll('.img-select .img-item img');
      const imgShowcase = document.querySelector('.img-showcase');

      imgItems.forEach((img, index) => {
        img.addEventListener('click', () => {
          imgShowcase.style.transform = `translateX(${-index * 100}%)`;
        });
      });

       document.querySelectorAll('.add-to-cart').forEach(button => {
    button.addEventListener('click', (e) => {
        e.preventDefault();
        
        let productElement = button.closest('.product'); // Find the parent element
        let sizeSelect = productElement.querySelector('.size-select'); // Get the selected size

        let product = {
            product_id: button.getAttribute('data-id'),
            product_name: button.getAttribute('data-name'),
            product_price: button.getAttribute('data-price'),
            product_image: button.getAttribute('data-image'),
            quantity: 1,
            size: sizeSelect ? sizeSelect.value : '' // Get the selected size value
        };
        
        addToCart(product);
    });
});

function addToCart(product) {
    fetch('/New-project/cart.php', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: `product_id=${product.product_id}&product_name=${product.product_name}&product_price=${product.product_price}&product_image=${product.product_image}&quantity=${product.quantity}&size=${product.size}`
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            renderCart();
        } else {
            alert(data.message);
        }
    });
}

function renderCart() {
    fetch('/New-project/cart.php')
        .then(response => response.json())
        .then(cartItems => {
            const cartSection = document.querySelector('.cart-section');
            cartSection.innerHTML = '';

            let totalPrice = 0;

            cartItems.forEach((item) => {
                const cartItem = document.createElement('div');
                cartItem.classList.add('cart-item');
                cartItem.innerHTML = `
                    <img src="${item.product_image}" alt="${item.product_name}" class="cart-item-image">
                    <div class="cart-item-details">
                        <h3>${item.product_name}</h3>
                        

                        <p>Size: ${item.size}</p> <!-- Display selected size -->
                        <p class="cart-item-price">₹${item.product_price}</p>
                        <div class="quantity-controls">
                            <button class="decrease-quantity" data-id="${item.product_id}">-</button>
                            <input type="number" value="${item.quantity}" min="1" class="quantity-input" data-id="${item.product_id}">
                            <button class="increase-quantity" data-id="${item.product_id}">+</button>
                        </div>
                        <button class="remove-from-cart" data-id="${item.product_id}">Remove</button>
                    </div>
                `;
                cartSection.appendChild(cartItem);

                totalPrice += parseFloat(item.product_price) * item.quantity;
            });

            document.getElementById('total-price').textContent = `₹${totalPrice.toFixed(2)}`;

            addRemoveFunctionality();
            addQuantityFunctionality();
        });
}


function addRemoveFunctionality() {
  document.querySelectorAll('.remove-from-cart').forEach(button => {
      button.addEventListener('click', (e) => {
          let product_id = button.getAttribute('data-id');
          removeFromCart(product_id);
      });
  });
}

function removeFromCart(product_id) {
  fetch('/New-project/cart.php', {
      method: 'DELETE',
      headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
      },
      body: `product_id=${product_id}`
  })
  .then(response => response.json())
  .then(data => {
      if (data.status === 'success') {
          renderCart();
      } else {
          alert(data.message);
      }
  });
}

    </script>
</body>
</html>