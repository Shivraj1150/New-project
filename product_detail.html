<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Product Details</title>
  <!-- FontAwesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
  <style>
 * {
      box-sizing: border-box;
      padding: 0;
      margin: 0;
      font-family: 'Open Sans', sans-serif;
    }

    body {
      line-height: 1.6;
      background-color: #f9f9f9;
      padding: 0;
      margin: 0;
      color: #333;
    }

    .card-wrapper {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 2rem;
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
    }

    .product-imgs, .product-content {
      flex: 1;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      background-color: #fff;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .product-imgs:hover, .product-content:hover {
      transform: scale(1.02);
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
    }

    .img-display {
      overflow: hidden;
      height: auto;
      position: relative;
    }

    .img-showcase {
      display: flex;
      transition: transform 0.8s ease-in-out;
      touch-action: pan-y;
    }

    .img-showcase img {
      width: 100%;
      height: auto;
      object-fit: cover;
      border-radius: 10px 10px 0 0;
    }

    .img-select {
      display: flex;
      justify-content: center;
      gap: 1rem;
      padding: 1rem;
      cursor: pointer;
    }

    .img-item img {
      width: 80px;
      border-radius: 10px;
      transition: transform 0.4s ease, opacity 0.4s;
    }

    .img-item img:hover {
      transform: scale(1.2);
      opacity: 0.8;
    }

    .product-content {
      padding: 2rem;
      position: relative;
      z-index: 2;
    }
    .fab{
      padding-right: 20px;
    }
    .product-title {
      font-size: 2.5rem;
      color: #ff6600;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 1rem;
      position: relative;
      padding-bottom: 1rem;
      transition: all 0.3s ease;
    }

    .product-title:hover {
      color: #e65c00;
    }

    .product-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 80px;
      height: 4px;
      background-color: #ff6600;
      transition: width 0.5s;
    }

    .product-title:hover::after {
      width: 150px;
    }

    .product-rating {
      color: #ffaf47;
      margin-bottom: 1rem;
    }

    .product-price2 {
      font-size: 1.4rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }

    .select-wrapper {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      margin-top: 1rem;
    }

    .select-group {
      display: flex;
      gap: 1rem;
    }

    .select-group label {
      font-size: 1rem;
      font-weight: 600;
      color: #333;
    }

    .select-group select {
      padding: 0.5rem;
      border-radius: 5px;
      border: 1px solid #ddd;
      font-size: 1rem;
      transition: border-color 0.3s ease;
    }

    .select-group select:focus {
      border-color: #ff6600;
    }

    .purchase-info {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .purchase-info input {
      padding: 0.5rem;
      width: 60px;
      border-radius: 5px;
      border: 1px solid #ddd;
    }

    .btn {
      padding: 0.7rem 1.5rem;
      border: none;
      border-radius: 25px;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
    }

    .btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .btn-primary {
      background-color: #ff6600;
    }

    .btn-primary:hover {
      background-color: #e65c00;
    }

    .social-links {
      margin-top: 0rem;
      display: flex;
      justify-content: flex-start;
    }

    .social-links a {
      font-size: 1.2rem;
      margin-right: 1rem;
      color: #555;
      transition: color 0.3s, transform 0.3s;
    }

    .social-links a:hover {
      color: #ff6600;
      transform: scale(1.2);
    }

   
.card-wrapper {
    max-width: 1200px;
    margin: 2rem auto;
    padding: 2rem;
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
}

/* Product Images Section */
.product-imgs, .product-content {
    flex: 1;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    background-color: #fff;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.notification {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  padding: 10px 20px;
  background-color: #ff6600;
  color: white;
  border-radius: 5px;
  opacity: 0.9;
  transition: opacity 0.5s ease, transform 0.5s ease;
  z-index: 1000;
  display: none; /* Hidden by default */
}

.notification.show {
  display: block;
  opacity: 1;
  transform: translateX(-50%) translateY(0);

}


/* Make product content and images stack on smaller screens */
@media (max-width: 768px) {
    .card-wrapper {
        flex-direction: column;
        padding: 1rem;
    }

    .product-imgs {
        width: 100%;
        margin-bottom: 1rem;
    }

    .product-content {
        width: 100%;
    }

    .product-title {
        font-size: 1.8rem;
    }

    .product-price2 {
        font-size: 1.2rem;
    }

    .purchase-info input {
        width: 100%;
        margin-bottom: 1rem;
    }

    .btn {
        width: 100%;
        padding: 0.8rem;
    }

    .social-links {
        flex-direction: row;
        
        align-items: center;
    }

    .social-links a {
        margin: 0.5rem 0;
    }

    .img-item img {
        width: 60px; /* Adjust thumbnail size */
    }
}

@media (max-width: 480px) {
    .product-title {
        font-size: 1.5rem;
    }

    .btn {
        padding: 0.5rem 1rem;
    }

    .product-rating {
        font-size: 0.8rem;
    }

    .purchase-info {
        flex-direction: column;
        gap: 0.5rem;
    }

    .product-price2 {
        font-size: 1.0rem;
    }

    .img-item img {
        width: 50px; /* Further adjust thumbnail size */
    }
}</style>
</head>
<body>
  <div class="card-wrapper">
    <!-- Product Images Section -->
    <div class="product-imgs">
      <div class="img-display">
        <div class="img-showcase">
          <img id="product-image-1" src="" alt="Product image 1">
          <img id="product-image-2" src="" alt="Product image 2">
          <img id="product-image-3" src="" alt="Product image 3">
          <img id="product-image-4" src="" alt="Product image 4">
        </div>
      </div>
      <div class="img-select">
        <div class="img-item">
          <img id="thumbnail-1" src="" alt="Thumbnail 1">
        </div>
        <div class="img-item">
          <img id="thumbnail-2" src="" alt="Thumbnail 2">
        </div>
        <div class="img-item">
          <img id="thumbnail-3" src="" alt="Thumbnail 3">
        </div>
        <div class="img-item">
          <img id="thumbnail-4" src="" alt="Thumbnail 4">
        </div>
      </div>
    </div>

    <!-- Product Content Section -->
    <div class="product-content product">
      <h2 id="product-name" class="product-title">Product Name</h2>
      <div class="product-rating">
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star-half-alt"></i>
        <span>4.7 (21)</span>
      </div>
      <div class="product-price2">
        <p id="product-price" class="last-price"></p>
      </div>

      <!-- Select Size and Color Options -->
      <div class="select-wrapper">
        <!-- Select Size -->
        <div class="select-group">
          <label for="size">Select Size:</label>
          <select id="size" name="size">
            <!-- Sizes will be populated here -->
            
          </select>
           <!-- Sizes will be populated here -->
           <label for="color">Select color:</label>
           <select id="color" name="color">
             <!-- Sizes will be populated here -->
           </select>
        </div>

        


     


      <!-- Purchase Info -->
      <div class="purchase-info product fea_pro_add_to_cart">
        <a href="#" class="add-to-cart" data-id="" data-name="" data-price="" data-image="" data-size="" data-color="">
          <i class="fa-solid fa-cart-plus" style="color: #000000;"> Add to Cart</i>
        </a>
      </div>
      <div id="notification" class="notification" style="display: none;"></div>

      <!-- Social Links -->
      <div class="social-links">
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
      </div>
      <p id="product-description"></p>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const urlParams = new URLSearchParams(window.location.search);
      const productId = urlParams.get('id');

      if (productId) {
        fetch(`get_product_details.php?id=${productId}`)
          .then(response => response.json())
          .then(data => {
            
            document.getElementById('product-name').textContent = data.name;
            document.getElementById('product-image-1').src = data.image_url_1;
            document.getElementById('product-image-2').src = data.image_url_2;
            document.getElementById('product-image-3').src = data.image_url_3;
            document.getElementById('product-image-4').src = data.image_url_4;

            document.getElementById('thumbnail-1').src = data.image_url_1;
            document.getElementById('thumbnail-2').src = data.image_url_2;
            document.getElementById('thumbnail-3').src = data.image_url_3;
            document.getElementById('thumbnail-4').src = data.image_url_4;

            document.getElementById('product-description').textContent = data.description;
            const price = parseFloat(data.price);
            if (!isNaN(price)) {
              document.getElementById('product-price').textContent = `₹${price.toFixed(2)}`;
            } else {
              document.getElementById('product-price').textContent = 'Price not available';
            }

             // Parse sizes if necessary
             let sizes = data.sizes;
                if (typeof sizes === "string") {
                    try {
                        sizes = JSON.parse(sizes);  // Parse stringified JSON array
                    } catch (e) {
                        console.error("Failed to parse sizes: ", e);
                        sizes = [];  // Fallback to empty array if parsing fails
                    }
                }


            // Populate sizes
            const sizeSelect = document.getElementById('size');
                sizeSelect.innerHTML = '';  // Clear existing options
                if (Array.isArray(data.sizes) && data.sizes.length > 0) {
                  data.sizes.forEach(size => {
                        const option = document.createElement('option');
                        option.value = size;
                        option.textContent = size;
                        sizeSelect.appendChild(option);
                    });
                } else {
                    const option = document.createElement('option');
                    option.value = "";
                    option.textContent = "Size not available";
                    sizeSelect.appendChild(option);
                }

                let colors = data.colors;
                if (typeof colors === "string") {
                    try {
                      colors = JSON.parse(colors);  // Parse stringified JSON array
                    } catch (e) {
                        console.error("Failed to parse colors: ", e);
                        colors = [];  // Fallback to empty array if parsing fails
                    }
                }

                 // Populate colors
const colorSelect = document.getElementById('color');
colorSelect.innerHTML = '';  // Clear existing options
if (Array.isArray(data.colors) && data.colors.length > 0) {
  data.colors.forEach(color => { // Use 'color' here
    const option = document.createElement('option');
    option.value = color; // Set the value correctly
    option.textContent = color; // Set the text correctly
    colorSelect.appendChild(option);
  });
} else {
  const option = document.createElement('option');
  option.value = "";
  option.textContent = "colour not available";
  colorSelect.appendChild(option);
}


       
       

            // Set the product details for add-to-cart button
            const addToCartButton = document.querySelector('.add-to-cart');
            addToCartButton.setAttribute('data-id', data.id);
            addToCartButton.setAttribute('data-name', data.name);
            addToCartButton.setAttribute('data-price', data.price);
            addToCartButton.setAttribute('data-image', data.image_url_1);

            // Image showcase functionality
            const imgItems = document.querySelectorAll('.img-select .img-item img');
            const imgShowcase = document.querySelector('.img-showcase');

            imgItems.forEach((img, index) => {
              img.addEventListener('click', () => {
                imgShowcase.style.transform = `translateX(${-index * 100}%)`;
              });
            });
          });
      }

      document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', (e) => {
          e.preventDefault();
          
          let productElement = button.closest('.product'); // Find the parent element
          let sizeSelect = document.getElementById('size'); // Assuming the size select exists globally
    let sizeValue = sizeSelect ? sizeSelect.value : 'No size selected';
    console.log('Selected Size:', sizeValue); // Log the selected size
    let colorSelect = document.getElementById('color'); // Assuming the size select exists globally
          
    let colorValue = colorSelect ? colorSelect.value : 'No color selected';
    console.log('Selected color:', colorValue); // Log the selected size


          let product = {
              product_id: button.getAttribute('data-id'),
              product_name: button.getAttribute('data-name'),
              product_price: button.getAttribute('data-price'),
              product_image: button.getAttribute('data-image'),
              quantity: 1,
              size: sizeSelect ? sizeSelect.value : '', // Get the selected size value
              color: colorSelect ? colorSelect.value : '' // Capture the selected color value

              
          };
          
          addToCart(product);
        });
      });

      function addToCart(product) {
        fetch('cart.php', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: `product_id=${product.product_id}&product_name=${product.product_name}&product_price=${product.product_price}&product_image=${product.product_image}&quantity=${product.quantity}&size=${product.size}&color=${product.color}`
          })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                renderCart();
                          showNotification(`${product.product_name} has been added to your cart!`);

            } else {
                alert(data.message);
            }
        });
      }

      function showNotification(message) {
  const notification = document.getElementById('notification');
  notification.textContent = message;
  notification.style.display = 'block';  // Change display to block
  notification.classList.add('show');

  setTimeout(() => {
      notification.classList.remove('show');
      notification.style.display = 'none';  // Hide again after showing
  }, 3000); // Notification will disappear after 3 seconds
}

      function renderCart() {
        fetch('/New-project/cart.php')
            .then(response => response.json())
            .then(cartItems => {
                const cartSection = document.querySelector('.cart-section');
                cartSection.innerHTML = '';

                let totalPrice = 0;

                cartItems.forEach((item) => {
                    const cartItem = document.createElement('div');
                    cartItem.classList.add('cart-item');

                    cartItem.innerHTML = `
                        <img src="${item.product_image}" alt="${item.product_name}">
                        <div class="cart-item-details">
                            <h4>${item.product_name}</h4>
                            <p>Size: ${item.size}</p>
                                 <p>Color: ${item.color}</p>
                            <p>Quantity: ${item.quantity}</p>
                            <p>Price: ₹${item.product_price}</p>
                        </div>
                        <button class="remove-item" data-id="${item.product_id}">Remove</button>
                    `;

                    cartSection.appendChild(cartItem);
                    totalPrice += item.product_price * item.quantity;
                });

                document.querySelector('.total-price').textContent = `Total: ₹${totalPrice.toFixed(2)}`;

                // Add remove item functionality
                document.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', () => {
                        const productId = button.getAttribute('data-id');
                        removeFromCart(productId);
                    });
                });
            });
      }

      function removeFromCart(productId) {
        fetch(`/New-project/cart.php?remove=${productId}`, {
            method: 'DELETE'
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                renderCart();
            } else {
                alert(data.message);
            }
        });
      }
    });

    
  </script>
</body>
</html>
